<!DOCTYPE html>
<html lang="zh-cn" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>NCE2 - 智跃人才-职前培训</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://sb-talents.github.io/BT-Moment-of-Truth/pages/nce2.html">

        <meta name="author" content="Shubin Sun" />
        <meta name="description" content="模拟物理碰撞要解决的几个问题： 怎样模拟速度的变化？ 设置一个摩擦系数 friction(0&lt;friction&lt;1.0) 和响应用户按键之后的一个 X 坐标单时间片增量 dx，一个 Y 坐标单时间片增量 dy，每隔一个时间片 dx = friction; dy = friction; 只要参数设置得当，看起来就会觉得速度自然地减慢。因为我们所用的浮点数的数据类型的精度限制，物体在经过一定数量时间片后就会停下来。 怎样模拟碰撞？ 每个时间片处理过程中，判断物体的边缘坐标加上 dx 与 dy 后有没有超过屏幕边缘，如果超过，则采取一定的策略重新设置物体坐标让其在正常范围内，如 X 轴超过，则对 dx 取反；如 Y 轴超过，则对 dy 取反。计算好坐标之后再进行绘图。 碰撞过程中的声音处理 这里涉及到音量，左右声道 …" />

    <meta property="og:site_name" content="智跃人才-职前培训" />
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="NCE2"/>
    <meta property="og:url" content="https://sb-talents.github.io/BT-Moment-of-Truth/pages/nce2.html"/>
    <meta property="og:description" content="模拟物理碰撞要解决的几个问题： 怎样模拟速度的变化？ 设置一个摩擦系数 friction(0&lt;friction&lt;1.0) 和响应用户按键之后的一个 X 坐标单时间片增量 dx，一个 Y 坐标单时间片增量 dy，每隔一个时间片 dx = friction; dy = friction; 只要参数设置得当，看起来就会觉得速度自然地减慢。因为我们所用的浮点数的数据类型的精度限制，物体在经过一定数量时间片后就会停下来。 怎样模拟碰撞？ 每个时间片处理过程中，判断物体的边缘坐标加上 dx 与 dy 后有没有超过屏幕边缘，如果超过，则采取一定的策略重新设置物体坐标让其在正常范围内，如 X 轴超过，则对 dx 取反；如 Y 轴超过，则对 dy 取反。计算好坐标之后再进行绘图。 碰撞过程中的声音处理 这里涉及到音量，左右声道 …" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://sb-talents.github.io/BT-Moment-of-Truth/theme/css/bootstrap.slate.min.css" type="text/css"/>
    <link href="https://sb-talents.github.io/BT-Moment-of-Truth/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://sb-talents.github.io/BT-Moment-of-Truth/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://sb-talents.github.io/BT-Moment-of-Truth/theme/css/style.css" type="text/css"/>
    <!-- CSS specifc for this theme -->
    <link rel="stylesheet" href="https://sb-talents.github.io/BT-Moment-of-Truth/theme/css/nero.css" type="text/css"/>
    <!-- copy button -->
    <link rel="stylesheet" href="https://sb-talents.github.io/BT-Moment-of-Truth/theme/css/copybutton.css" type="text/css"/>


    <!-- For JSON+LD included in base.html -->

<script type="application/ld+json">
[
{
  "@context": "http://schema.org",
  "@type": "Blog",
  "name": "智跃人才-职前培训",
  "url": "https://sb-talents.github.io/BT-Moment-of-Truth"
}
,{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "item": {
        "@id": "https://sb-talents.github.io/BT-Moment-of-Truth",
        "name": "智跃人才-职前培训"
      }
    }
  ]
}
]
</script>
<!--
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
-->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>

    <!-- <script src="https://sb-talents.github.io/BT-Moment-of-Truth/theme/js/jquery.min.js"></script> -->

    <!-- https://jquery.com/download -->
    <!-- https://github.com/jquery/jquery/releases -->
    <!-- Using jquery 3.5.1-->

    <script src="https://sb-talents.github.io/BT-Moment-of-Truth/theme/js/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script async src="https://sb-talents.github.io/BT-Moment-of-Truth/theme/js/bootstrap.min.js"></script>

    <!-- For Cookie Consent 2-->

<!-- https://www.osano.com/cookieconsent/documentation/javascript-api/ -->

<!-- https://github.com/cdnjs/cdnjs/tree/master/ajax/libs/cookieconsent2/3.1.1 -->
<!-- https://cdnjs.com/libraries/cookieconsent2 -->

<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css" integrity="sha384-nA7usz4cMKo7RylsCZnpe0V9qx5X7sa011o0OrDzrKUE7Ero1gB48Fjaw6SFxVZe" crossorigin="anonymous"/>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js" integrity="sha384-xLPjH6nqG4p/2mu1KJ1t+4KqcvkyXVwBucQtyGK65lDNfKzECxGY/QEYWR+Wompr" crossorigin="anonymous">
</script>

<script>
window.addEventListener("load", function(){
 window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#212121",
      "text": "#f1f1f1"
    },
    "button": {
      "background": "#f1d600"
    }
  },
  "cookie": {
	"secure": true
  },
  "type": "opt-in",
  "revokable": true,
  "content": {
    "message": "By using the site, we assume you have read and agree the privacy policy.",
    "compliance": "opt-in",
    "allow": "Allow",
    "dismiss": "OK, got it!",
    "deny": "Decline",
    "link": "Learn more",
    "href": ""
  },
	onInitialise: function (status) {
            var type = this.options.type;
            var didConsent = this.hasConsented();
            if (type == 'opt-in' && didConsent) {
                //trackingScripts()
		console.log ("Consented. onInit");
            }
            if (type == 'opt-out' && !didConsent) {
                // disable cookies
		console.log ("No Consent. onInit");
            }
        },

        onStatusChange: function(status, chosenBefore) {
            var type = this.options.type;
            var didConsent = this.hasConsented();
            if (type == 'opt-in' && didConsent) {
                //trackingScripts()
		console.log ("Consented. onStatusChange");
	    }
            if (type == 'opt-out' && !didConsent) {
                // disable cookies
		console.log ("No Consent. onStatusChange");
            }
	},

        onRevokeChoice: function() {
          var type = this.options.type;
          if (type == 'opt-in') {
            // disable cookies
		console.log ("onRevoke disable cookies");
		location.reload();
          }
          if (type == 'opt-out') {
            // enable cookies
		console.log ("onRevoke enable cookies");
          }
	}
 })
});

</script>


      <!-- clipboard.js and copy button -->
      <script async src="https://sb-talents.github.io/BT-Moment-of-Truth/theme/js/copybutton.js"></script>
      <!-- https://github.com/zenorocha/clipboard.js -->
      <script async src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha384-x6nRSkfSsKGBsvlLFHHNju+buS3zYUztVnTRz/0JKgOIk3ulS6bNce/vHOvYE2eY" crossorigin="anonymous"></script>

    <!-- For the sizing of top navbar to collapse sooner -->
    <script type="text/javascript">
      $('#monitor').html($(window).width());

      $(window).resize(function() {
      var viewportWidth = $(window).width();
      $('#monitor').html(viewportWidth);
      });

        <!-- for highlighttable converted by pygments wrap under table-responsive -->
        <!-- for table converted by docutils and wrap under table-responsive -->
      $(document).ready(function () {
	$(".highlighttable").wrap("<div class='table-responsive'></div>");
	$("table.docutils").wrap("<div class='table-responsive'></div>");
	//$(".highlighttable").wrap("<div class='table table-striped table-responsive'></div>");
	//$("table.docutils").wrap("<div class='table table-striped table-responsive'></div>");
      });

    </script>

</head>
<body>

<!-- bs3 code -->
<!--
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
-->

<div class="navbar navbar-default navbar-light fixed-top navbar-expand-lg" role="navigation">
    <div class="container">
		<!-- seems navbar-toggle-left (collapse/collapsed?) not in Bootstrap3 -->
            <!--<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">-->
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="Toggle-navigation">
	<!--
                <span class="sr-only navbar-toggler-icon fa fa-navicon" style="font-size:24px"> Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
	-->
		<span>
		  <i class="fa fa-bars"></i>
		</span>
            </button>
            <a href="https://sb-talents.github.io/BT-Moment-of-Truth/" class="navbar-brand">
智跃人才-职前培训            </a>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <!-- <ul class="nav navbar-nav"> -->
            <ul class="navbar-nav mr-auto">

		<li class="nav-item dropdown">
		    <a class="nav-link dropdown-toggle navbar-text" role="button" id="navbarDropDownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        Categories
                    	<span class="caret"></span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropDownMenu1">
				<a 					class="dropdown-item"
				href="https://sb-talents.github.io/BT-Moment-of-Truth/category/aaa.html">Aaa
				</a>
				<a 					class="dropdown-item"
				href="https://sb-talents.github.io/BT-Moment-of-Truth/category/bbb.html">Bbb
				</a>
				<a 					class="dropdown-item"
				href="https://sb-talents.github.io/BT-Moment-of-Truth/category/ccc.html">Ccc
				</a>
				<a 					class="dropdown-item"
				href="https://sb-talents.github.io/BT-Moment-of-Truth/category/eee.html">Eee
				</a>
                     </div> <!-- dropdown-menu -->
		</li>


                         <li 				  class="nav-link"
>
				<a href="https://sb-talents.github.io/BT-Moment-of-Truth/pages/nce1.html">
                             NCE1
                          </a></li>
                         <li  class="nav-link active"
>
				<a href="https://sb-talents.github.io/BT-Moment-of-Truth/pages/nce2.html">
                             NCE2
                          </a></li>

            </ul> <!-- <ul class="nav navbar-nav"> -->
            <ul class="nav navbar-nav ml-auto">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- some space after the top banner -->
<div class="pb-2 mb-2"> </div>

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-md-9 order-1">
    <section id="content" class="body">
        <h1 class="entry-title">NCE2</h1>
        
        <div class="entry-content">
            <p>模拟物理碰撞要解决的几个问题：</p>
<ol>
<li>怎样模拟速度的变化？</li>
</ol>
<p>设置一个摩擦系数 friction(0&lt;friction&lt;1.0) 和响应用户按键之后的一个 X 坐标单时间片增量 dx，一个 Y 坐标单时间片增量 dy，每隔一个时间片 dx <em>= friction; dy </em>= friction; 只要参数设置得当，看起来就会觉得速度自然地减慢。因为我们所用的浮点数的数据类型的精度限制，物体在经过一定数量时间片后就会停下来。</p>
<ol>
<li>怎样模拟碰撞？</li>
</ol>
<p>每个时间片处理过程中，判断物体的边缘坐标加上 dx 与 dy 后有没有超过屏幕边缘，如果超过，则采取一定的策略重新设置物体坐标让其在正常范围内，如 X 轴超过，则对 dx 取反；如 Y 轴超过，则对 dy 取反。计算好坐标之后再进行绘图。</p>
<ol>
<li>碰撞过程中的声音处理</li>
</ol>
<p>这里涉及到音量，左右声道，播放速度。对音量和播放速度可以按照场景来设置，可以考虑根据 X,Y 坐标作为其中一个参数，左右声道比较合理的处理方案是根据窗口宽度和物体 X 坐标来决定左右声道的混合比例。</p>
<p>WINDOWS SDK 窗口对此过程的模拟（仅摹仿了速度和碰撞等，对声音的相关处理貌似比较复杂，还没搞清楚怎么写。由于是做个简单 DEMO，并没有加入多线程等技术，所以程序里的坐标等数据的同步并不精准，上、下、左、右键最好是短暂地点一下即松开，连着按的话会出现速度的突兀变化）：</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * FILE : collision.cpp</span>
<span class="cm"> * 功能 : 模拟一个小球在一个封闭区域内的碰撞等活动</span>
<span class="cm"> * 作者 : Zhuang Ma( http://www.mazhuang.org )</span>
<span class="cm"> * 声明 : 版权没有 盗版不究</span>
<span class="cm"> */</span>

<span class="cp">#include</span> <span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>

<span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">100.0f</span><span class="p">;</span>    <span class="c1">// 球的中心点 X 坐标</span>
<span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">100.0f</span><span class="p">;</span>    <span class="c1">// 球的中心点 Y 坐标</span>
<span class="kt">float</span> <span class="n">speed</span> <span class="o">=</span> <span class="mf">10.0f</span><span class="p">;</span>    <span class="c1">// 球响应按钮后的初始速度</span>
<span class="kt">float</span> <span class="n">friction</span> <span class="o">=</span> <span class="mf">0.99f</span><span class="p">;</span> <span class="c1">// 球与地面的摩擦系数</span>
<span class="kt">float</span> <span class="n">dx</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>    <span class="c1">// X 轴增量</span>
<span class="kt">float</span> <span class="n">dy</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>    <span class="c1">// Y 轴增量</span>

<span class="n">LRESULT</span> <span class="n">CALLBACK</span> <span class="nf">MainWndProc</span><span class="p">(</span><span class="n">HWND</span><span class="p">,</span> <span class="n">UINT</span><span class="p">,</span> <span class="n">WPARAM</span><span class="p">,</span> <span class="n">LPARAM</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">WINAPI</span> <span class="nf">WinMain</span><span class="p">(</span><span class="n">HINSTANCE</span> <span class="n">hInstance</span><span class="p">,</span> <span class="n">HINSTANCE</span> <span class="n">hPrevInstance</span><span class="p">,</span> <span class="n">PSTR</span> <span class="n">szCmdLine</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nCmdShow</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">WNDCLASS</span> <span class="n">wc</span><span class="p">;</span>
    <span class="n">MSG</span> <span class="n">msg</span><span class="p">;</span>
    <span class="n">HWND</span> <span class="n">hWnd</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">hPrevInstance</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">lpszClassName</span> <span class="o">=</span> <span class="s">&quot;GenericAppClass&quot;</span><span class="p">;</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">lpfnWndProc</span> <span class="o">=</span> <span class="n">MainWndProc</span><span class="p">;</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">CS_OWNDC</span> <span class="o">|</span> <span class="n">CS_VREDRAW</span> <span class="o">|</span> <span class="n">CS_HREDRAW</span><span class="p">;</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">hInstance</span> <span class="o">=</span> <span class="n">hInstance</span><span class="p">;</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">hIcon</span> <span class="o">=</span> <span class="n">LoadIcon</span><span class="p">(</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">IDI_APPLICATION</span> <span class="p">);</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">hCursor</span> <span class="o">=</span> <span class="n">LoadCursor</span><span class="p">(</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">IDC_ARROW</span> <span class="p">);</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">hbrBackground</span> <span class="o">=</span> <span class="p">(</span><span class="n">HBRUSH</span><span class="p">)(</span> <span class="n">COLOR_WINDOW</span><span class="o">+</span><span class="mi">1</span> <span class="p">);</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">lpszMenuName</span> <span class="o">=</span> <span class="s">&quot;GenericAppMenu&quot;</span><span class="p">;</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">cbClsExtra</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">wc</span><span class="p">.</span><span class="n">cbWndExtra</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="n">RegisterClass</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">wc</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="n">hWnd</span> <span class="o">=</span> <span class="n">CreateWindow</span><span class="p">(</span> <span class="s">&quot;GenericAppClass&quot;</span><span class="p">,</span>
            <span class="s">&quot;Happy Ball&quot;</span><span class="p">,</span>
            <span class="n">WS_OVERLAPPEDWINDOW</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">WS_MAXIMIZEBOX</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">WS_THICKFRAME</span><span class="p">),</span>
            <span class="mi">100</span><span class="p">,</span>
            <span class="mi">100</span><span class="p">,</span>
            <span class="mi">800</span><span class="p">,</span>
            <span class="mi">600</span><span class="p">,</span>
            <span class="nb">NULL</span><span class="p">,</span>
            <span class="nb">NULL</span><span class="p">,</span>
            <span class="n">hInstance</span><span class="p">,</span>
            <span class="nb">NULL</span>
            <span class="p">);</span>

    <span class="n">ShowWindow</span><span class="p">(</span> <span class="n">hWnd</span><span class="p">,</span> <span class="n">nCmdShow</span> <span class="p">);</span>

    <span class="k">while</span><span class="p">(</span> <span class="n">GetMessage</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">msg</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="n">TranslateMessage</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">msg</span> <span class="p">);</span>
        <span class="n">DispatchMessage</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">msg</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">msg</span><span class="p">.</span><span class="n">wParam</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">LRESULT</span> <span class="n">CALLBACK</span> <span class="nf">MainWndProc</span><span class="p">(</span><span class="n">HWND</span> <span class="n">hwnd</span><span class="p">,</span> <span class="n">UINT</span> <span class="n">message</span><span class="p">,</span> <span class="n">WPARAM</span> <span class="n">wParam</span><span class="p">,</span> <span class="n">LPARAM</span> <span class="n">lParam</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">static</span> <span class="n">PAINTSTRUCT</span> <span class="n">ps</span><span class="p">;</span>
    <span class="k">static</span> <span class="n">HDC</span> <span class="n">hDC</span><span class="p">;</span>
    <span class="k">static</span> <span class="n">HBRUSH</span> <span class="n">hBrush</span><span class="p">;</span>
    <span class="k">static</span> <span class="n">RECT</span> <span class="n">rect</span><span class="p">;</span>
    <span class="n">GetClientRect</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rect</span><span class="p">);</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">nRadius</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="nl">WM_CREATE</span><span class="p">:</span>
            <span class="n">SetTimer</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
            <span class="n">hBrush</span> <span class="o">=</span> <span class="n">CreateSolidBrush</span><span class="p">(</span><span class="n">RGB</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">case</span> <span class="nl">WM_PAINT</span><span class="p">:</span>
            <span class="n">hDC</span> <span class="o">=</span> <span class="n">BeginPaint</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ps</span><span class="p">);</span>
            <span class="n">SelectObject</span><span class="p">(</span><span class="n">hDC</span><span class="p">,</span> <span class="n">hBrush</span><span class="p">);</span>
            <span class="n">Ellipse</span><span class="p">(</span><span class="n">hDC</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">nRadius</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">nRadius</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">nRadius</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">nRadius</span><span class="p">);</span>
            <span class="n">EndPaint</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ps</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>

        <span class="k">case</span> <span class="nl">WM_KEYDOWN</span><span class="p">:</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">wParam</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">case</span> <span class="nl">VK_UP</span><span class="p">:</span>
                    <span class="n">dy</span> <span class="o">-=</span> <span class="n">speed</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="nl">VK_DOWN</span><span class="p">:</span>
                    <span class="n">dy</span> <span class="o">+=</span> <span class="n">speed</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="nl">VK_LEFT</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">-=</span> <span class="n">speed</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="nl">VK_RIGHT</span><span class="p">:</span>
                    <span class="n">dx</span> <span class="o">+=</span> <span class="n">speed</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">break</span><span class="p">;</span>

        <span class="k">case</span> <span class="nl">WM_TIMER</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">*=</span> <span class="n">friction</span><span class="p">;</span>
            <span class="n">dy</span> <span class="o">*=</span> <span class="n">friction</span><span class="p">;</span>
            <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="p">;</span>
            <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">rect</span><span class="p">.</span><span class="n">right</span> <span class="o">-</span> <span class="n">nRadius</span><span class="p">)</span> <span class="p">{</span> <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">right</span> <span class="o">-</span> <span class="n">nRadius</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">right</span> <span class="o">-</span> <span class="n">nRadius</span><span class="p">));</span> <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">nRadius</span><span class="p">)</span> <span class="p">{</span> <span class="n">x</span> <span class="o">=</span> <span class="n">nRadius</span> <span class="o">+</span> <span class="n">nRadius</span> <span class="o">-</span> <span class="n">x</span><span class="p">;</span> <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">rect</span><span class="p">.</span><span class="n">bottom</span> <span class="o">-</span> <span class="n">nRadius</span><span class="p">)</span> <span class="p">{</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rect</span><span class="p">.</span><span class="n">bottom</span> <span class="o">-</span> <span class="n">nRadius</span> <span class="o">-</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">bottom</span> <span class="o">-</span> <span class="n">nRadius</span><span class="p">));</span> <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="p">;</span> <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">nRadius</span><span class="p">)</span> <span class="p">{</span><span class="n">y</span> <span class="o">=</span> <span class="n">nRadius</span> <span class="o">+</span> <span class="n">nRadius</span> <span class="o">-</span> <span class="n">y</span><span class="p">;</span> <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="p">;</span> <span class="p">}</span>
            <span class="n">InvalidateRect</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rect</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">);</span>

            <span class="k">break</span><span class="p">;</span>

        <span class="k">case</span> <span class="nl">WM_DESTROY</span><span class="p">:</span>
            <span class="n">KillTimer</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="n">DeleteObject</span><span class="p">(</span><span class="n">hBrush</span><span class="p">);</span>
            <span class="n">PostQuitMessage</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">DefWindowProc</span><span class="p">(</span><span class="n">hwnd</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">wParam</span><span class="p">,</span> <span class="n">lParam</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>


<p>HGE 示例源码及 Win32 SDK 源码及可运行程序下载地址：http://download.csdn.net/detail/mzlogin/4059869</p>
        </div>
    </section>
        </div>
        <div class="col-md-3 order-2" id="sidebar">
            <aside>
<!-- Sidebar -->

<!-- Sidebar/Social -->
<section class="sidebar card bg-dark card-body mb-3" id="sb_Social_Card">
<!--<li class="list-group-item">-->
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social Contact</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="#"><i class="fa fa-you-can-add-links-in-your-config-file-square fa-lg"></i> You can add links in your config file</a></li>
    <li class="list-group-item"><a href="#"><i class="fa fa-another-social-link-square fa-lg"></i> Another social link</a></li>
  </ul>
<!--</li>-->
</section>
<!-- End Sidebar/Social -->
<!-- <section class="well well-sm"> -->
<section class="card card-body mb-3 bg-faded p-1 mb-3">
<!-- <section class="card"> -->
  <ul class="list-group list-group-flush">

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="http://getpelican.com/" target="_blank">Pelican</a>
    </li>
    <li class="list-group-item">
      <a href="http://python.org/" target="_blank">Python.org</a>
    </li>
    <li class="list-group-item">
      <a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a>
    </li>
    <li class="list-group-item">
      <a href="#" target="_blank">You can modify those links in your config file</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->

<!-- Sidebar/Tag Cloud -->
<!--<section class="card"> -->
<li class="list-group-item">
  <a href="https://sb-talents.github.io/BT-Moment-of-Truth/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <div class="row">
  <div class="col-10 offset-1 mt-3 " id="tagcloud-tags">
     <!-- <span class="badge"> -->
       <a class="tag-4" href="https://sb-talents.github.io/BT-Moment-of-Truth/tag/qiu-zhi.html">求职</a>
  <!--    </span> -->
  <!--  </li> -->
     <!-- <span class="badge"> -->
       <a class="tag-4" href="https://sb-talents.github.io/BT-Moment-of-Truth/tag/zhao-pin.html">招聘</a>
  <!--    </span> -->
  <!--  </li> -->
  </div>
</div>
</li>
<!-- </section>-->
<!-- End Sidebar/Tag Cloud -->


<!-- Sidebar/Optional Bottom -->
<li class="list-group-item">
  <h4> <i class="fa fa-home fa-lg"></i><span class="icon-label"></span> Disclaimer</h4>
  <ul class="list-group" id="disclaimer">
    <li class="list-group-item">
	Replace by your text for disclaimer
    </li>
  </ul>
</li>
<!-- End Sidebar/Optional Bottom -->

  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2020 Shubin Sun
            &middot; Powered by <a href="https://github.com/kappa-wingman/pelican-bootstrap4-nero" rel="noopener noreferrer" target="_blank">pelican-bootstrap4-nero</a>,
            <a href="https://docs.getpelican.com/" rel="nofollow noopener noreferrer" target="_blank">Pelican</a>,
            <a href="https://getbootstrap.com" rel="nofollow noopener noreferrer" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<!-- Loading of jQuery and Bootstrap moved to head -->
<!-- Include all compiled plugins (below), or include individual files as needed -->


<!-- Disable include of includes/ga.html, as the default one had no consent checking -->



<noscript>Your browser does not support JavaScript.</noscript>

</body>
</html>